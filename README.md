# Frozen-Sea

Frozen-Sea is a website designated to create, manage and participate in user-studies at Ludwig-Maximilians University Munich.

# Frameworks
The project REST-API is generated by [LoopBack](http://loopback.io).
The frontend was built in angular.js[https://angularjs.org] with the use of Angular Material[https://material.angularjs.org].
We use a MongoDB[https://www.mongodb.com] and mLab[https://mlab.com] as database.

# Deployment
When deploying the project to a new server you need to follow these steps:
1) Install node and npm.
2) Perform "npm install" in the parent directory as well as in the "client" directory.
3) If "bower install" is not performed automaticall by "npm install" you need to perform this command in both folders too.
4) Change the API URL in the client/app/app.config.js inside LoopBackResourceProvider.setUrlBase('http://localhost:3000/api') to the the API URL.

#Changing the datasource
1) You need to change the \server\datasources.json file to point to the new database.
2) You need to create (e.g. copy) the following roles in the database, inside a collection named "Role": 

{
    "_id": {
        "$oid": "58bc4281b4660d0d66daeb90"
    },
    "name": "advisor",
    "created": {
        "$date": "2017-03-05T16:53:21.425Z"
    },
    "modified": {
        "$date": "2017-03-05T16:53:21.425Z"
    }
}

AND

{
    "_id": {
        "$oid": "58bc42e50435dc1f661f62ec"
    },
    "name": "admin",
    "created": {
        "$date": "2017-03-05T16:55:00.962Z"
    },
    "modified": {
        "$date": "2017-03-05T16:55:00.962Z"
    }
}

3) You need at least one admin account. First register a new account and then create a collection named "RoleMapping". Elevate the account to admin by adding

{
    "_id": {
        "$oid": "58c89db9bdc0119431742940"
    },
    "principalType": "USER",
    "principalId": "58b5be7e6efdc2e829839ac5",
    "roleId": {
        "$oid": "58bc42e50435dc1f661f62ec"
    }
}

where principalId is the id of your new admin account, roldeId is the id of the role and id is a random new id for the RoleMapping instance.

#Changing the website email-adresss
